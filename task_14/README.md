# 課題14: TDD（テスト駆動開発）でコードを書いてみる

## 課題１（質問）

### テスト駆動開発のメリット/デメリット

#### メリット
- バグに気が付ける
- 良いコード(結合度が低く、凝縮度が高い)になる
- 上記の様に保守性の高いコードになり、機能追加やリファクタが容易になる
- テストを仕様の確認として使える

#### 参考: [良いコードとは何か](https://note.com/cyberz_cto/n/n26f535d6c575)
> CyberAgentの新卒向け資料ですが、「良いコード」について分かりやすく解説している記事なのでおすすめです

#### デメリット
- 開発初期ではテストを書くことがコストになる
- チーム開発でTDDを行う共通認識をとる必要がある
- テストライブラリの学習コスト、チーム内での習熟度による差が発生する

### TDD用語

- レッド・グリーン・リファクタリング

    テスト駆動開発のサイクルでのフェーズを表す用語。
    - レッド... テストが失敗している状態。プロダクションコードが無い状態でテストを書くのが望ましい。
    - グリーン... テストが成功している状態。どんなコードでも良い。
    - リファクタリング... 実装したコードを読みやすく意味のある状態にする

- 三点測量

    想定している動作を正しく表現するために、2つ以上の値・パターンでテストを実装すること。レッドの状態を実装する際に用いる
- 仮実装

    実装したいロジックを考慮せず、グリーンの状態にするため(テストを成功させるため)だけの実装

#### 参考: [テスト駆動開発って何だろう](https://dev.classmethod.jp/articles/what-tdd/)

# 課題２（実装）

四則演算を行うnode.jsのスクリプトを、TDDで作成する

### 動作イメージ
- node script.js multiply 3 10 3 // 90を返す
- node script.js add 3 10 3 // 16を返す
- node script.js subtract 3 10 3 // -10を返す
- node script.js divide 100 10 // 10を返す

### 以下の仕様を満たすこと
- 渡された引数に対して計算を行い、結果を返す
- 1個〜30個までの引数を受け取る（31個以上の引数を指定するとエラーが発生する）
- 引数が数字以外だとエラーが発生する
- 足し算の場合、計算結果が1000を超える場合は合計ではなく「too big」と文字列が返る
- 引き算の場合、計算結果がマイナスの場合は「negative number」と文字列が返る
- かけ算の場合、計算結果が1000を越える場合は「big big number」と文字列が返る
- 割り算の場合、計算結果を小数点何桁まで考慮するかは特に指定なし

## テスト駆動開発のTODOリスト

- 演算子のチェック
  - [x] 第一引数が想定された四則演算でない場合はエラーになる

- 引数のチェック
  - [x] 引数の文字列を数値に変換
  - [x] 引数が数字以外だとエラー
  - [x] 引数の数が30以下は動作
  - [x] 引数の数が31以上だった場合にエラー
  - [x] 引数が存在しない場合エラー

- 足し算
  - [x] 1+2=3となる
  - [x] 計算結果が1000を超える場合は「too big」と文字列が返る

- 引き算
  - [x] 3-2=1となる
  - [x] 計算結果がマイナスの場合は「negative number」と文字列が返る

- 掛け算
  - [x] 1*2=2となる
  - [x] 計算結果が1000を越える場合は「big big number」と文字列が返る

- 割り算
  - [x] 1/3=0.33となる(小数点以下3桁目を四捨五入)
  - [x] 0で割るとエラーが出る



