# CDN(CloudFront)について理解して使ってみよう

## 課題１

なぜCDNを使うとWEBサーバの負荷分散やWEBサービスのパフォーマンス改善につながるのでしょうか？

- 負荷分散
    
    CDNを利用すると、オリジンサーバーの代わりにエッジ(キャッシュ)サーバーがアクセスを受付け、ウェブコンテンツのコピーをレスポンスとして返す。

    オリジンサーバへのアクセス集中を回避でき、複数のエッジサーバにアクセスを分散できるので負荷分散によりパフォーマンス改善が期待できる。

- 物理的な距離

    アクセスするサーバの物理的な距離が遠ければ遠いほど、データ取得のリクエストにかかる時間は増加する。

    オリジンサーバとクライアントの距離が遠い場合でも、エッジサーバがより近ければ通信の速度が改善するため、パフォーマンス向上が期待できる。

### オリジンサーバとエッジサーバの違い

エンドユーザー → エッジサーバ(CDN) → オリジンサーバー

- オリジンサーバ

    ウェブコンテンツを保持しているサーバ。

- エッジサーバ

    CDNが運用するサーバ。エンドユーザとオリジンサーバの間にあり、オリジンサーバのコンテンツをキャッシュ(一時保存)している。


### ブラウザキャッシュと比較した際のCDNの利点

ブラウザキャッシュは、ユーザ側でキャッシュの削除や制御が可能なため、サービス側で確実にキャッシュを制御することができない。

そのため、容量の大きい静的ファイルや、キャッシュ制御を確実に行いたいファイルに関してはCDNを利用した方が良い。


### 参考

[CDNってそもそも何？なんかサーバの負荷が下がるって聞いたんだけど！](https://knowledge.sakura.ad.jp/19191/)

## 課題２ 

### CDN(CloudFront)を使ってパフォーマンスを比較する

### S3(オハイオリージョン)に画像を配置する
https://praha-open-image-us-east-1111.s3.us-east-2.amazonaws.com/praha.png

Time: 747ms

![スクリーンショット 2021-08-22 20 33 26](https://user-images.githubusercontent.com/32977282/130353566-b015e98f-82fb-41df-9944-e2b2fac449ac.png)


### CloudFrontを設定する
https://d3dgq18vsq2f9s.cloudfront.net/praha.png

Time: 24ms

![スクリーンショット 2021-08-22 20 33 34](https://user-images.githubusercontent.com/32977282/130353569-a183c178-6e27-4368-a4b4-9855340278fd.png)

### 参考

[【初心者向け】S3の静的サイトにCloudfrontを設定してみた](https://dev.classmethod.jp/articles/s3-cloudfront-setting/)

